#
# Cookbook Name:: {{app.name}}
# Library:: install_git_lib
#
# {{app.publisher.packaging_copyright}}
#

class Chef::Recipe::{{app.chefName}}

    def self.install_git (chef, app)
        git = Chef::Recipe::Git
        git.synchronize(chef, '{{app.repo.url}}', '{{app.repo.branch}}', app[:run_as], app[:run_as_home], app[:repo_dir])

        {{#if app.supporting_repos}}
            {{#each app.supporting_repos}}
                {{#if dir}}
        dir = subst('{{dir}}', app)
                {{else}}
        dir = nil
                {{/if}}
        git.synchronize(chef, '{{url}}', '{{branch}}', app[:run_as], app[:run_as_home], dir)
            {{/each}}
        {{/if}}
    end

end